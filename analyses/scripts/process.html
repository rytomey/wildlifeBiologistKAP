<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Cleaning &amp; Processing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="process_files/libs/clipboard/clipboard.min.js"></script>
<script src="process_files/libs/quarto-html/quarto.js"></script>
<script src="process_files/libs/quarto-html/popper.min.js"></script>
<script src="process_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="process_files/libs/quarto-html/anchor.min.js"></script>
<link href="process_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="process_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="process_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="process_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="process_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning &amp; Processing</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="initialization" class="level1">
<h1>Initialization</h1>
<section id="packages" class="level4">
<h4 class="anchored" data-anchor-id="packages">Packages</h4>
</section>
<section id="data-import" class="level4">
<h4 class="anchored" data-anchor-id="data-import">Data Import</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Set Paths ----</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>base     <span class="ot">&lt;-</span> <span class="fu">normalizePath</span>(<span class="fu">file.path</span>(<span class="st">".."</span>, <span class="st">".."</span>), <span class="at">mustWork =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>analyses <span class="ot">&lt;-</span> <span class="fu">file.path</span>(base, <span class="st">"analyses"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>inp <span class="ot">&lt;-</span> <span class="fu">file.path</span>(analyses, <span class="st">"inputs"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>oup <span class="ot">=</span> <span class="fu">file.path</span>(analyses, <span class="st">"outputs"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Load Raw Dataset ----</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>Rsurv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(inp, <span class="st">"progover60.csv"</span>))  </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#colnames(Rsurv)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#glimpse(Rsurv)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="processing" class="level1">
<h1>Processing</h1>
<section id="metadata" class="level3">
<h3 class="anchored" data-anchor-id="metadata">Metadata</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removal Criteria ---------------------</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> Rsurv <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">START =</span> <span class="fu">mdy_hms</span>(<span class="fu">paste</span>(SDATE, STIME)),   <span class="co"># Correct US date format</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">END =</span> <span class="fu">mdy_hms</span>(<span class="fu">paste</span>(EDATE, ETIME)),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">DURATION =</span> <span class="fu">as.numeric</span>(DURATION) <span class="sc">/</span> <span class="dv">60</span>,   <span class="co"># Convert seconds to minutes</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">PROG =</span> <span class="fu">as.numeric</span>(PROG)) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(START), <span class="sc">!</span><span class="fu">is.na</span>(END), <span class="sc">!</span><span class="fu">is.na</span>(DURATION),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    DURATION <span class="sc">&gt;=</span> <span class="dv">5</span>,  <span class="co"># At least 5 minutes</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    PROG <span class="sc">&gt;=</span> <span class="dv">70</span>,     <span class="co"># At least 70% completed</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    FINISHED <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Summary of Cleaned Metadata ----</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(surv<span class="sc">$</span>DURATION)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
    5.300     7.758    10.800   261.802    18.917 19144.317 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(surv<span class="sc">$</span>PROG)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    100     100     100     100     100     100 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Retention Stats ----</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>retained_n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(surv)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>original_n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(Rsurv)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>removed_n  <span class="ot">&lt;-</span> original_n <span class="sc">-</span> retained_n</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Count total original responses</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>original_n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(Rsurv)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Individual criteria failure counts</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>removed_short_duration <span class="ot">&lt;-</span> Rsurv <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DURATION =</span> <span class="fu">as.numeric</span>(DURATION) <span class="sc">/</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DURATION <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>removed_low_prog <span class="ot">&lt;-</span> Rsurv <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PROG <span class="sc">&lt;</span> <span class="dv">70</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Both criteria failed (overlap) </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>removed_both <span class="ot">&lt;-</span> Rsurv <span class="sc">%&gt;%</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DURATION =</span> <span class="fu">as.numeric</span>(DURATION) <span class="sc">/</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(DURATION <span class="sc">&lt;</span> <span class="dv">5</span>, PROG <span class="sc">&lt;</span> <span class="dv">70</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Outputs -----------</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Total responses:"</span>, original_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total responses: 155 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Removed for short duration (&lt; 5 min):"</span>, removed_short_duration, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removed for short duration (&lt; 5 min): 13 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Removed for low completion (&lt; 70%):"</span>, removed_low_prog, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removed for low completion (&lt; 70%): 5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Removed for both criteria:"</span>, removed_both, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removed for both criteria: 3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Original responses:"</span>, original_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Original responses: 155 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Retained responses:"</span>, retained_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Retained responses: 136 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Removed responses:"</span>, removed_n, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removed responses: 19 </code></pre>
</div>
</div>
</section>
<section id="demographics" class="level3">
<h3 class="anchored" data-anchor-id="demographics">Demographics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Initial Demographic Processing ----------------------------------------</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate age and filter invalid ranges</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">AGE =</span> <span class="fu">if_else</span>(<span class="fu">between</span>(<span class="dv">2024</span> <span class="sc">-</span> DOB, <span class="dv">19</span>, <span class="dv">100</span>), <span class="dv">2024</span> <span class="sc">-</span> DOB, <span class="cn">NA_integer_</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Clean and recode categorical variables</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">RACE =</span> <span class="fu">na_if</span>(RACE, <span class="st">"I prefer not to answer"</span>) <span class="sc">%&gt;%</span> <span class="fu">as_factor</span>(),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ETHNICITY =</span> <span class="fu">na_if</span>(ETHNICITY, <span class="st">"I prefer not to answer"</span>) <span class="sc">%&gt;%</span> <span class="fu">as_factor</span>(),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">GENDER =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>      GENDER <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"I prefer not to answer"</span>, <span class="st">"Other"</span>) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> GENDER) <span class="sc">%&gt;%</span> <span class="fu">as_factor</span>(),</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">INCOME =</span> <span class="fu">factor</span>(INCOME, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"$0-20,000"</span>, <span class="st">"$20,001-30,000"</span>, <span class="st">"$30,001-40,000"</span>, <span class="st">"$40,001-50,000"</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"$50,001-60,000"</span>, <span class="st">"$60,001-70,000"</span>, <span class="st">"$70,001-80,000"</span>, <span class="st">"$80,001-90,000"</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">"$90,001-100,000"</span>, <span class="st">"$100,001+"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">EDUCATION =</span> <span class="fu">factor</span>(EDUCATION, <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Did not graduate high school/no GED"</span>, <span class="st">"High school graduate/GED"</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Technical/Vocational School"</span>, <span class="st">"Some College/AA or AS (2-year degree)"</span>,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>      <span class="st">"College Graduate/BA or BS (4-year degree)"</span>, <span class="st">"Graduate or Professional School"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">COURSETIME =</span> <span class="fu">factor</span>(COURSETIME, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt;5 years"</span>, <span class="st">"5-10 years"</span>, <span class="st">"&gt;10 years"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">BIOTIME    =</span> <span class="fu">factor</span>(BIOTIME, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt;1 year"</span>, <span class="st">"1-5 years"</span>, <span class="st">"5-10 years"</span>, <span class="st">"10-20 years"</span>, <span class="st">"&gt;20 years"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">AFFILIATE =</span> <span class="fu">as_factor</span>(AFFILIATE),</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">ACTIVITY  =</span> <span class="fu">as_factor</span>(ACTIVITY))</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create Binary Demographic Variables -----------------------------------</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>median_age <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>AGE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">AGEbin =</span> <span class="fu">if_else</span>(AGE <span class="sc">&gt;=</span> median_age, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">RACEbin =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>      RACE <span class="sc">==</span> <span class="st">"White"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(RACE)    <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>            <span class="sc">~</span> <span class="cn">NA_real_</span>),</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">GENDERbin =</span> <span class="fu">case_when</span>(</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>      GENDER <span class="sc">==</span> <span class="st">"Male"</span>   <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>      GENDER <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>               <span class="sc">~</span> <span class="cn">NA_real_</span>),</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">RESIDENTbin   =</span> <span class="fu">if_else</span>(RESIDENT   <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">DEGREEbin     =</span> <span class="fu">if_else</span>(DEGREE     <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">TWSbin        =</span> <span class="fu">if_else</span>(TWS        <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">COURSEbin     =</span> <span class="fu">if_else</span>(COURSE     <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">SELFTITLEbin  =</span> <span class="fu">if_else</span>(SELFTITLE  <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="knowledge" class="level3">
<h3 class="anchored" data-anchor-id="knowledge">Knowledge</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Knowledge: correct answers coded as 1, incorrect as 0, IDK as NA</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">PIGS_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>      PIGS <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      PIGS <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      PIGS <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">BRUCE_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      BRUCE <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># correct: brucellosis does affect wildlife</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>      BRUCE <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>      BRUCE <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">CWD_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>      CWD <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># correct: CWD is not tick-borne</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>      CWD <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>      CWD <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">FLUAL_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>      FLUAL <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>      FLUAL <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>      FLUAL <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">FLU_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>      FLU <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>      FLU <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>      FLU <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">COVID_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>      COVID <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>      COVID <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>      COVID <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">COVIDSPILL_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>      COVIDSPILL <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>      COVIDSPILL <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>      COVIDSPILL <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">RABIESAL_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>      RABIESAL <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>      RABIESAL <span class="sc">==</span> <span class="st">"FALSE"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>      RABIESAL <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">RABIES_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>      RABIES <span class="sc">==</span> <span class="st">"Bites"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>      RABIES <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">TURKEY_K =</span> <span class="fu">case_when</span>(</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>      TURKEY <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Bury"</span>, <span class="st">"Incinerate"</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>      TURKEY <span class="sc">==</span> <span class="st">"I don't know"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a> <span class="co"># Confidence: IDK = 1 (low confidence), others = 0</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">PIGS_C =</span> <span class="fu">if_else</span>(PIGS <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">BRUCE_C =</span> <span class="fu">if_else</span>(BRUCE <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">CWD_C =</span> <span class="fu">if_else</span>(CWD <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">FLUAL_C =</span> <span class="fu">if_else</span>(FLUAL <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">FLU_C =</span> <span class="fu">if_else</span>(FLU <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">COVID_C =</span> <span class="fu">if_else</span>(COVID <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">COVIDSPILL_C =</span> <span class="fu">if_else</span>(COVIDSPILL <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">RABIESAL_C =</span> <span class="fu">if_else</span>(RABIESAL <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">RABIES_C =</span> <span class="fu">if_else</span>(RABIES <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">TURKEY_C =</span> <span class="fu">if_else</span>(TURKEY <span class="sc">==</span> <span class="st">"I don't know"</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Cronbachs Alpha ------------------------------------------------------------------</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>knowledge_items <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"BRUCE_K"</span>, <span class="st">"CWD_K"</span>, <span class="st">"FLUAL_K"</span>, <span class="st">"FLU_K"</span>,<span class="st">"COVIDSPILL_K"</span>,</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>  <span class="st">"COVID_K"</span>, <span class="st">"TURKEY_K"</span>, <span class="st">"PIGS_K"</span>)</span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Removed "PIGS_K", </span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>confidence_items <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BRUCE_C"</span>, <span class="st">"CWD_C"</span>, <span class="st">"FLUAL_C"</span>, <span class="st">"FLU_C"</span>,</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>  <span class="st">"COVID_C"</span>, <span class="st">"COVIDSPILL_C"</span>, <span class="st">"RABIESAL_C"</span>, <span class="st">"TURKEY_C"</span>)</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>alpha_know <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(knowledge_items)), <span class="at">check.keys =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>alpha_conf <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(confidence_items)), <span class="at">check.keys =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>alpha_know<span class="sc">$</span>alpha.drop <span class="sc">%&gt;%</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(raw_alpha))  <span class="co"># Items that increase alpha if dropped</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             raw_alpha std.alpha   G6(smc) average_r      S/N   alpha se
PIGS_K       0.6544536 0.6659230 0.6606077 0.2216446 1.993322 0.04461632
FLUAL_K      0.6502356 0.6522768 0.6464050 0.2113432 1.875851 0.04393558
TURKEY_K     0.6467920 0.6506071 0.6487710 0.2101202 1.862107 0.04444401
CWD_K        0.6426795 0.6461087 0.6389141 0.2068641 1.825726 0.04507324
COVIDSPILL_K 0.6423370 0.6497165 0.6421707 0.2094710 1.854830 0.04539539
FLU_K        0.6290446 0.6279050 0.6133399 0.1942433 1.687486 0.04703094
BRUCE_K      0.6120483 0.6233279 0.6243696 0.1912030 1.654829 0.04946838
COVID_K      0.5891008 0.6009850 0.5925157 0.1770681 1.506171 0.05250699
                   var.r     med.r
PIGS_K       0.010639262 0.1999135
FLUAL_K      0.011700984 0.2052154
TURKEY_K     0.012723086 0.1941865
CWD_K        0.009397918 0.1941865
COVIDSPILL_K 0.009999528 0.1941865
FLU_K        0.007689862 0.1891513
BRUCE_K      0.011938330 0.1678565
COVID_K      0.008438618 0.1891513</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>alpha_conf<span class="sc">$</span>alpha.drop <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(raw_alpha))  <span class="co"># Items that increase alpha if dropped</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             raw_alpha std.alpha   G6(smc) average_r      S/N   alpha se
COVIDSPILL_C 0.6544749 0.6640812 0.6681820 0.2202216 1.976910 0.04349878
RABIESAL_C   0.6503699 0.6584452 0.6594558 0.2159312 1.927788 0.04367959
FLUAL_C      0.6499829 0.6577963 0.6606235 0.2154433 1.922236 0.04378429
CWD_C        0.6479105 0.6490680 0.6438447 0.2089997 1.849555 0.04490321
FLU_C        0.6416472 0.6497424 0.6546158 0.2094899 1.855042 0.04527718
TURKEY_C     0.6405440 0.6491469 0.6399729 0.2090570 1.850195 0.04496950
BRUCE_C      0.5957807 0.6239216 0.6102175 0.1915945 1.659020 0.05158901
COVID_C      0.5860985 0.6136760 0.6069734 0.1849567 1.588501 0.05314498
                   var.r     med.r
COVIDSPILL_C 0.010979899 0.1907447
RABIESAL_C   0.011998330 0.1856441
FLUAL_C      0.011511444 0.1870039
CWD_C        0.011368967 0.1870039
FLU_C        0.012233020 0.1907447
TURKEY_C     0.009261087 0.1870039
BRUCE_C      0.006629536 0.1856441
COVID_C      0.007374974 0.1726629</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>alpha_know<span class="sc">$</span>total<span class="sc">$</span>raw_alpha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6649695</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>alpha_conf<span class="sc">$</span>total<span class="sc">$</span>raw_alpha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6653711</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: View detailed item statistics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>alpha_know</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(surv, all_of(knowledge_items)), check.keys = TRUE)

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd median_r
      0.66      0.67    0.67       0.2   2 0.042  0.7 0.23     0.19

    95% confidence boundaries 
         lower alpha upper
Feldt     0.57  0.66  0.74
Duhachek  0.58  0.66  0.75

 Reliability if an item is dropped:
             raw_alpha std.alpha G6(smc) average_r S/N alpha se  var.r med.r
BRUCE_K           0.61      0.62    0.62      0.19 1.7    0.049 0.0119  0.17
CWD_K             0.64      0.65    0.64      0.21 1.8    0.045 0.0094  0.19
FLUAL_K           0.65      0.65    0.65      0.21 1.9    0.044 0.0117  0.21
FLU_K             0.63      0.63    0.61      0.19 1.7    0.047 0.0077  0.19
COVIDSPILL_K      0.64      0.65    0.64      0.21 1.9    0.045 0.0100  0.19
COVID_K           0.59      0.60    0.59      0.18 1.5    0.053 0.0084  0.19
TURKEY_K          0.65      0.65    0.65      0.21 1.9    0.044 0.0127  0.19
PIGS_K            0.65      0.67    0.66      0.22 2.0    0.045 0.0106  0.20

 Item statistics 
               n raw.r std.r r.cor r.drop mean   sd
BRUCE_K      136  0.64  0.61  0.52   0.44 0.63 0.48
CWD_K        136  0.50  0.53  0.43   0.32 0.82 0.38
FLUAL_K      136  0.48  0.51  0.39   0.29 0.81 0.39
FLU_K        136  0.54  0.59  0.53   0.42 0.90 0.30
COVIDSPILL_K 136  0.56  0.52  0.41   0.34 0.45 0.50
COVID_K      136  0.69  0.67  0.63   0.51 0.61 0.49
TURKEY_K     136  0.55  0.51  0.39   0.32 0.46 0.50
PIGS_K       136  0.40  0.46  0.32   0.27 0.93 0.26

Non missing response frequency for each item
                0    1 miss
BRUCE_K      0.37 0.63    0
CWD_K        0.18 0.82    0
FLUAL_K      0.19 0.81    0
FLU_K        0.10 0.90    0
COVIDSPILL_K 0.55 0.45    0
COVID_K      0.39 0.61    0
TURKEY_K     0.54 0.46    0
PIGS_K       0.07 0.93    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>alpha_conf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(surv, all_of(confidence_items)), check.keys = TRUE)

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd median_r
      0.67      0.68    0.68      0.21 2.1 0.042 0.78 0.22     0.19

    95% confidence boundaries 
         lower alpha upper
Feldt     0.57  0.67  0.74
Duhachek  0.58  0.67  0.75

 Reliability if an item is dropped:
             raw_alpha std.alpha G6(smc) average_r S/N alpha se  var.r med.r
BRUCE_C           0.60      0.62    0.61      0.19 1.7    0.052 0.0066  0.19
CWD_C             0.65      0.65    0.64      0.21 1.8    0.045 0.0114  0.19
FLUAL_C           0.65      0.66    0.66      0.22 1.9    0.044 0.0115  0.19
FLU_C             0.64      0.65    0.65      0.21 1.9    0.045 0.0122  0.19
COVID_C           0.59      0.61    0.61      0.18 1.6    0.053 0.0074  0.17
COVIDSPILL_C      0.65      0.66    0.67      0.22 2.0    0.043 0.0110  0.19
RABIESAL_C        0.65      0.66    0.66      0.22 1.9    0.044 0.0120  0.19
TURKEY_C          0.64      0.65    0.64      0.21 1.9    0.045 0.0093  0.19

 Item statistics 
               n raw.r std.r r.cor r.drop mean   sd
BRUCE_C      136  0.67  0.63  0.58   0.50 0.74 0.44
CWD_C        136  0.45  0.54  0.44   0.34 0.96 0.21
FLUAL_C      136  0.47  0.51  0.39   0.29 0.85 0.36
FLU_C        136  0.48  0.54  0.43   0.34 0.91 0.28
COVID_C      136  0.70  0.66  0.62   0.52 0.67 0.47
COVIDSPILL_C 136  0.55  0.49  0.35   0.31 0.58 0.50
RABIESAL_C   136  0.49  0.51  0.39   0.29 0.82 0.39
TURKEY_C     136  0.55  0.54  0.45   0.34 0.74 0.44

Non missing response frequency for each item
                0    1 miss
BRUCE_C      0.26 0.74    0
CWD_C        0.04 0.96    0
FLUAL_C      0.15 0.85    0
FLU_C        0.09 0.91    0
COVID_C      0.33 0.67    0
COVIDSPILL_C 0.42 0.58    0
RABIESAL_C   0.18 0.82    0
TURKEY_C     0.26 0.74    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Composite -------------------------------------------------------------</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">KNOWLEDGE_SCORE =</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">all_of</span>(knowledge_items)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONFIDENCE_SCORE =</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">all_of</span>(confidence_items)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate median and mean</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>median_know <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>KNOWLEDGE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>mean_know   <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>KNOWLEDGE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>median_conf <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>CONFIDENCE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>mean_conf   <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>CONFIDENCE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>median_know</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.75</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>mean_know  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7022059</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>median_conf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.875</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mean_conf  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7830882</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create binary variables based on both median and mean</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Median split</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">KNOWmedbin =</span> <span class="fu">if_else</span>(KNOWLEDGE_SCORE <span class="sc">&gt;=</span> median_know, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONFmedbin =</span> <span class="fu">if_else</span>(CONFIDENCE_SCORE <span class="sc">&gt;=</span> median_conf, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mean split</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">KNOWavgbin =</span> <span class="fu">if_else</span>(KNOWLEDGE_SCORE <span class="sc">&gt;=</span> mean_know, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONFavgbin =</span> <span class="fu">if_else</span>(CONFIDENCE_SCORE <span class="sc">&gt;=</span> mean_conf, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Labeled versions (optional)</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">KNOWmedcat =</span> <span class="fu">if_else</span>(KNOWLEDGE_SCORE <span class="sc">&gt;=</span> median_know, <span class="st">"More Knowledge"</span>, <span class="st">"Less Knowledge"</span>),</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONFmedcat =</span> <span class="fu">if_else</span>(CONFIDENCE_SCORE <span class="sc">&gt;=</span> median_conf, <span class="st">"More Confidence"</span>, <span class="st">"Less Confidence"</span>),</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">KNOWmeancat =</span> <span class="fu">if_else</span>(KNOWLEDGE_SCORE <span class="sc">&gt;=</span> mean_know, <span class="st">"More Knowledge"</span>, <span class="st">"Less Knowledge"</span>),</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONFmeancat =</span> <span class="fu">if_else</span>(CONFIDENCE_SCORE <span class="sc">&gt;=</span> mean_conf, <span class="st">"More Confidence"</span>, <span class="st">"Less Confidence"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="attitudes" class="level3">
<h3 class="anchored" data-anchor-id="attitudes">Attitudes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode Schemes ----------------------------------------------------------</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>likert_pos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Strongly Disagree"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"Neutral"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="dv">4</span>, <span class="st">"Strongly Agree"</span> <span class="ot">=</span> <span class="dv">5</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>likert_neg <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Strongly Agree"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"Agree"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"Neutral"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"Disagree"</span> <span class="ot">=</span> <span class="dv">4</span>, <span class="st">"Strongly Disagree"</span> <span class="ot">=</span> <span class="dv">5</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode Attitude Items ---------------------------------------------------</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">SURVEY_A   =</span> <span class="fu">recode</span>(SURVEY, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">VACCINE_A  =</span> <span class="fu">recode</span>(VACCINE, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">PREVAL_A   =</span> <span class="fu">recode</span>(PREVAL, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">DIVERSE_A  =</span> <span class="fu">recode</span>(DIVERSE, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONSEQ_A   =</span> <span class="fu">recode</span>(CONSEQ, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">CLIMATE_A  =</span> <span class="fu">recode</span>(CLIMATE, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">PPEREQ_A   =</span> <span class="fu">recode</span>(PPEREQ, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">POPPLAN_A  =</span> <span class="fu">recode</span>(POPPLAN, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">EDREQ_A    =</span> <span class="fu">recode</span>(EDREQ, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">INFO_A     =</span> <span class="fu">recode</span>(INFO, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">HANDSON_A  =</span> <span class="fu">recode</span>(HANDSON, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">ACCESSbin   =</span> <span class="fu">if_else</span>(ACCESS <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">0</span>, <span class="fu">if_else</span>(ACCESS <span class="sc">==</span> <span class="st">"No"</span>, <span class="dv">1</span>, <span class="cn">NA_real_</span>)),</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">INTERESTbin   =</span> <span class="fu">if_else</span>(INTEREST   <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">BATS_A     =</span> <span class="fu">recode</span>(BATS, <span class="sc">!!!</span>likert_pos),</span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">POPRED_A   =</span> <span class="fu">recode</span>(POPRED, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">CWDAL_A    =</span> <span class="fu">recode</span>(CWDAL, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">EHD_A      =</span> <span class="fu">recode</span>(EHD, <span class="sc">!!!</span>likert_neg),</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">DARWIN_A   =</span> <span class="fu">recode</span>(DARWIN, <span class="sc">!!!</span>likert_neg))</span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Cronbach's Alpha --------------------------------------------------------</span></span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Select all attitude-related variables</span></span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a>attitude_items <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"POPRED_A"</span>, <span class="st">"POPPLAN_A"</span>, <span class="st">"SURVEY_A"</span>, <span class="st">"VACCINE_A"</span>, <span class="st">"PPEREQ_A"</span>,</span>
<span id="cb42-31"><a href="#cb42-31" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"PREVAL_A"</span>, <span class="st">"DIVERSE_A"</span>, <span class="st">"CONSEQ_A"</span>,</span>
<span id="cb42-32"><a href="#cb42-32" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"EDREQ_A"</span>, <span class="st">"HANDSON_A"</span>, <span class="st">"BATS_A"</span>, <span class="st">"ACCESSbin"</span>, <span class="st">"INTERESTbin"</span>)</span>
<span id="cb42-33"><a href="#cb42-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-34"><a href="#cb42-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute Cronbach's Alpha</span></span>
<span id="cb42-35"><a href="#cb42-35" aria-hidden="true" tabindex="-1"></a>alpha_att <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(attitude_items)), <span class="at">check.keys =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-36"><a href="#cb42-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-37"><a href="#cb42-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Output results</span></span>
<span id="cb42-38"><a href="#cb42-38" aria-hidden="true" tabindex="-1"></a>alpha_att<span class="sc">$</span>total<span class="sc">$</span>raw_alpha</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6177934</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>alpha_att</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(surv, all_of(attitude_items)), check.keys = TRUE)

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd median_r
      0.62      0.62    0.66      0.11 1.6 0.047  3.1 0.37     0.11

    95% confidence boundaries 
         lower alpha upper
Feldt     0.52  0.62  0.71
Duhachek  0.53  0.62  0.71

 Reliability if an item is dropped:
            raw_alpha std.alpha G6(smc) average_r S/N alpha se  var.r med.r
POPRED_A-        0.58      0.59    0.63     0.109 1.5    0.051 0.0117  0.11
POPPLAN_A-       0.59      0.60    0.64     0.111 1.5    0.050 0.0120  0.11
SURVEY_A         0.61      0.61    0.65     0.115 1.6    0.048 0.0125  0.11
VACCINE_A        0.60      0.61    0.64     0.114 1.5    0.049 0.0118  0.12
PPEREQ_A         0.60      0.60    0.65     0.111 1.5    0.049 0.0131  0.11
PREVAL_A         0.56      0.56    0.59     0.097 1.3    0.055 0.0093  0.09
DIVERSE_A        0.58      0.59    0.62     0.107 1.4    0.052 0.0083  0.11
CONSEQ_A         0.60      0.60    0.64     0.113 1.5    0.050 0.0108  0.12
EDREQ_A          0.61      0.61    0.65     0.114 1.5    0.048 0.0122  0.11
HANDSON_A-       0.62      0.62    0.65     0.118 1.6    0.047 0.0104  0.11
BATS_A           0.60      0.60    0.64     0.111 1.5    0.050 0.0124  0.11
ACCESSbin-       0.61      0.62    0.65     0.118 1.6    0.048 0.0116  0.12
INTERESTbin      0.61      0.61    0.65     0.115 1.6    0.048 0.0124  0.13

 Item statistics 
              n raw.r std.r r.cor r.drop mean   sd
POPRED_A-   136  0.51  0.46  0.40   0.33 1.61 1.00
POPPLAN_A-  136  0.47  0.44  0.36   0.29 1.88 0.99
SURVEY_A    136  0.32  0.39  0.29   0.20 4.47 0.62
VACCINE_A   136  0.40  0.39  0.31   0.23 3.40 0.90
PPEREQ_A    136  0.44  0.43  0.33   0.26 3.65 0.99
PREVAL_A    136  0.61  0.61  0.62   0.46 3.51 0.94
DIVERSE_A   136  0.51  0.48  0.46   0.35 3.75 0.88
CONSEQ_A    136  0.45  0.41  0.33   0.26 2.79 0.98
EDREQ_A     136  0.35  0.40  0.30   0.20 4.27 0.78
HANDSON_A-  136  0.38  0.35  0.25   0.18 2.35 1.02
BATS_A      136  0.47  0.43  0.35   0.27 3.25 1.08
ACCESSbin-  136  0.26  0.35  0.23   0.17 4.71 0.45
INTERESTbin 136  0.25  0.38  0.27   0.20 0.91 0.28

Non missing response frequency for each item
               0    1    2    3    4    5 miss
POPRED_A    0.00 0.03 0.18 0.29 0.39 0.12    0
POPPLAN_A   0.00 0.03 0.25 0.39 0.24 0.10    0
SURVEY_A    0.00 0.00 0.01 0.04 0.42 0.53    0
VACCINE_A   0.00 0.03 0.11 0.38 0.39 0.09    0
PPEREQ_A    0.00 0.02 0.13 0.19 0.48 0.18    0
PREVAL_A    0.00 0.01 0.15 0.26 0.46 0.12    0
DIVERSE_A   0.00 0.01 0.08 0.26 0.46 0.19    0
CONSEQ_A    0.00 0.08 0.33 0.33 0.23 0.03    0
EDREQ_A     0.00 0.00 0.02 0.14 0.38 0.46    0
HANDSON_A   0.00 0.11 0.41 0.21 0.25 0.01    0
BATS_A      0.00 0.06 0.22 0.22 0.41 0.09    0
ACCESSbin   0.71 0.29 0.00 0.00 0.00 0.00    0
INTERESTbin 0.09 0.91 0.00 0.00 0.00 0.00    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>alpha_att<span class="sc">$</span>alpha.drop <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(raw_alpha))  <span class="co"># Items that increase alpha if dropped</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            raw_alpha std.alpha   G6(smc)  average_r      S/N   alpha se
HANDSON_A-  0.6155801 0.6168649 0.6477049 0.11829830 1.610045 0.04733563
INTERESTbin 0.6132797 0.6103600 0.6501093 0.11546640 1.566472 0.04830698
ACCESSbin-  0.6127761 0.6171222 0.6540272 0.11841190 1.611799 0.04821387
SURVEY_A    0.6087735 0.6088697 0.6478636 0.11482837 1.556693 0.04844703
EDREQ_A     0.6085592 0.6068040 0.6462033 0.11395047 1.543261 0.04835626
VACCINE_A   0.6045972 0.6077475 0.6427242 0.11435053 1.549379 0.04878372
PPEREQ_A    0.5994467 0.6007112 0.6453261 0.11140423 1.504453 0.04945408
CONSEQ_A    0.5978662 0.6044843 0.6413892 0.11297350 1.528344 0.04981825
BATS_A      0.5970725 0.6000492 0.6387451 0.11113136 1.500308 0.04974460
POPPLAN_A-  0.5933286 0.5991234 0.6373609 0.11075102 1.494533 0.05022970
POPRED_A-   0.5848110 0.5938152 0.6274238 0.10859761 1.461934 0.05128956
DIVERSE_A   0.5813980 0.5906135 0.6155928 0.10732081 1.442679 0.05181096
PREVAL_A    0.5564611 0.5621538 0.5930711 0.09665131 1.283907 0.05502138
                  var.r      med.r
HANDSON_A-  0.010423720 0.11161376
INTERESTbin 0.012383501 0.12681597
ACCESSbin-  0.011597608 0.12368102
SURVEY_A    0.012467657 0.10614456
EDREQ_A     0.012172926 0.11161376
VACCINE_A   0.011836264 0.11644403
PPEREQ_A    0.013146293 0.11161376
CONSEQ_A    0.010806058 0.12368102
BATS_A      0.012434027 0.10563277
POPPLAN_A-  0.011993070 0.10563277
POPRED_A-   0.011661582 0.10563277
DIVERSE_A   0.008285898 0.10563277
PREVAL_A    0.009271230 0.09011249</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Composite Score ----------------------------------------------------------</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute composite score</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTITUDE_SCORE =</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">all_of</span>(attitude_items)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary stats</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>median_att <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>ATTITUDE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>mean_att <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>ATTITUDE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>median_att</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.076923</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>mean_att</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.034502</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print stats</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median Attitude Score:"</span>, median_att, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median Attitude Score: 3.076923 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Mean Attitude Score:"</span>, mean_att, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mean Attitude Score: 3.034502 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create binary and categorical variables</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Binary splits</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTITUDEmedbin =</span> <span class="fu">if_else</span>(ATTITUDE_SCORE <span class="sc">&gt;=</span> median_att, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTITUDEavgbin =</span> <span class="fu">if_else</span>(ATTITUDE_SCORE <span class="sc">&gt;=</span> mean_att, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTITUDEmedcat =</span> <span class="fu">if_else</span>(ATTITUDE_SCORE <span class="sc">&gt;=</span> median_att, <span class="st">"More Positive"</span>, <span class="st">"Less Positive"</span>),</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTITUDEavgcat =</span> <span class="fu">if_else</span>(ATTITUDE_SCORE <span class="sc">&gt;=</span> mean_att, <span class="st">"More Positive"</span>, <span class="st">"Less Positive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="practices" class="level3">
<h3 class="anchored" data-anchor-id="practices">Practices</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Recoding ------------------------------------------------</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">LICENSEbin =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>      LICENSE <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>      LICENSE <span class="sc">==</span> <span class="st">"No"</span>  <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>             <span class="sc">~</span> <span class="cn">NA_integer_</span>),</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">COLLECTbin   =</span> <span class="fu">if_else</span>(COLLECT <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>L, <span class="fu">if_else</span>(COLLECT <span class="sc">==</span> <span class="st">"No"</span>, <span class="dv">0</span>L, <span class="cn">NA_integer_</span>)),</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">HANDLEbin    =</span> <span class="fu">if_else</span>(HANDLE <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">1</span>L, <span class="fu">if_else</span>(HANDLE <span class="sc">==</span> <span class="st">"No"</span>, <span class="dv">0</span>L, <span class="cn">NA_integer_</span>)),</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">PPEbin       =</span> <span class="fu">if_else</span>(PPE <span class="sc">==</span> <span class="st">"No"</span>, <span class="dv">1</span>L, <span class="fu">if_else</span>(PPE <span class="sc">==</span> <span class="st">"Yes"</span>, <span class="dv">0</span>L, <span class="cn">NA_integer_</span>)),</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">PPETIMEbin =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>     PPETIME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Never (0%)"</span>, <span class="st">"Rarely (1%-24%)"</span>) <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>     PPETIME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Sometimes (25%-75%)"</span>, <span class="st">"Usually (76%-99%)"</span>, <span class="st">"Always (100%)"</span>) <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span>),</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">FIELDbin     =</span> <span class="fu">if_else</span>(FIELD <span class="sc">&gt;=</span> <span class="dv">24</span>, <span class="dv">1</span>L, <span class="dv">0</span>L),  <span class="co"># ≥50% time in field</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">STATEbin     =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>      STATE <span class="sc">==</span> <span class="st">"Dead"</span> <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>      STATE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Alive - Sedated"</span>, <span class="st">"Alive - Not Sedated"</span>) <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span>),</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">CONTACTbin =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>      CONTACT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Daily"</span>, <span class="st">"Weekly"</span>, <span class="st">"Monthly"</span>) <span class="sc">~</span> <span class="dv">1</span>L,</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>      CONTACT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Rarely"</span>, <span class="st">"Never"</span>) <span class="sc">~</span> <span class="dv">0</span>L,</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_integer_</span>))</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Cronbachs Alpha ------------------------------------------------------------</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>practice_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"COLLECTbin"</span>, <span class="st">"HANDLEbin"</span>)</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>alpha_prac <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(practice_vars)), <span class="at">check.keys =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Output reliability metrics</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(alpha_prac<span class="sc">$</span>total<span class="sc">$</span>raw_alpha)  <span class="co"># Raw Cronbach's alpha value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8074567</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(alpha_prac)  <span class="co"># Full reliability report</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(surv, all_of(practice_vars)), check.keys = TRUE)

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd median_r
      0.81      0.81    0.68      0.68 4.2 0.033 0.42 0.45     0.68

    95% confidence boundaries 
         lower alpha upper
Feldt     0.73  0.81  0.86
Duhachek  0.74  0.81  0.87

 Reliability if an item is dropped:
           raw_alpha std.alpha G6(smc) average_r S/N alpha se var.r med.r
COLLECTbin      0.69      0.68    0.46      0.68 2.1       NA     0  0.68
HANDLEbin       0.66      0.68    0.46      0.68 2.1       NA     0  0.68

 Item statistics 
             n raw.r std.r r.cor r.drop mean   sd
COLLECTbin 136  0.92  0.92  0.75   0.68 0.46 0.50
HANDLEbin  136  0.91  0.92  0.75   0.68 0.38 0.49

Non missing response frequency for each item
              0    1 miss
COLLECTbin 0.54 0.46    0
HANDLEbin  0.62 0.38    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>alpha_prac<span class="sc">$</span>alpha.drop <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(raw_alpha))  <span class="co"># Items that increase alpha if dropped</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           raw_alpha std.alpha   G6(smc) average_r     S/N alpha se var.r
COLLECTbin 0.6941392 0.6772924 0.4587249 0.6772924 2.09878       NA     0
HANDLEbin  0.6608544 0.6772924 0.4587249 0.6772924 2.09878       NA     0
               med.r
COLLECTbin 0.6772924
HANDLEbin  0.6772924</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Practice Composite Score Calculation -----------------------------------</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate composite score (mean of binary practice indicators)</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PRACTICE_SCORE =</span> <span class="fu">rowMeans</span>(<span class="fu">select</span>(., <span class="fu">all_of</span>(practice_vars)), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>median_practice <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>PRACTICE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>mean_practice <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>PRACTICE_SCORE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median Practice Score:"</span>, median_practice, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median Practice Score: 0.25 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Mean Practice Score:"</span>, mean_practice, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mean Practice Score: 0.4191176 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">PRACTICEmedbin =</span> <span class="fu">if_else</span>(PRACTICE_SCORE <span class="sc">&gt;=</span> median_practice, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">PRACTICEavgbin =</span> <span class="fu">if_else</span>(PRACTICE_SCORE <span class="sc">&gt;=</span> mean_practice, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PRACTICEmedcat =</span> <span class="fu">if_else</span>(PRACTICE_SCORE <span class="sc">&gt;=</span> median_practice, <span class="st">"More Practice"</span>, <span class="st">"Less Practice"</span>),</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">PRACTICEavgcat =</span> <span class="fu">if_else</span>(PRACTICE_SCORE <span class="sc">&gt;=</span> mean_practice, <span class="st">"More Practice"</span>, <span class="st">"Less Practice"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="additional" class="level1">
<h1>Additional</h1>
<section id="processed-skimr" class="level3">
<h3 class="anchored" data-anchor-id="processed-skimr">Processed Skimr</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Desmographic ------------------------------------------------------------</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>Dskim <span class="ot">=</span> <span class="fu">skim</span>(<span class="fu">select</span>(surv, AGE, RACE, ETHNICITY, GENDER, INCOME, EDUCATION, </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>            COURSETIME, BIOTIME, AFFILIATE, ACTIVITY, AGEbin, RACEbin, </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>            GENDERbin, RESIDENTbin, DEGREEbin, TWSbin, COURSEbin, SELFTITLEbin))</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Knowledge and confidence variables -------------------------------------------</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>knowledge_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"PIGS_K"</span>, <span class="st">"BRUCE_K"</span>, <span class="st">"CWD_K"</span>, <span class="st">"FLUAL_K"</span>, <span class="st">"FLU_K"</span>, </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"COVID_K"</span>, <span class="st">"COVIDSPILL_K"</span>, <span class="st">"RABIESAL_K"</span>, <span class="st">"RABIES_K"</span>, </span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"TURKEY_K"</span>, <span class="st">"KNOWLEDGE_SCORE"</span>, </span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"KNOWmedbin"</span>, <span class="st">"KNOWavgbin"</span>, <span class="st">"KNOWmedcat"</span>, <span class="st">"KNOWmeancat"</span>)</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>confidence_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"PIGS_C"</span>, <span class="st">"BRUCE_C"</span>, <span class="st">"CWD_C"</span>, <span class="st">"FLUAL_C"</span>, <span class="st">"FLU_C"</span>, </span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"COVID_C"</span>, <span class="st">"COVIDSPILL_C"</span>, <span class="st">"RABIESAL_C"</span>, <span class="st">"RABIES_C"</span>, </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"TURKEY_C"</span>, <span class="st">"CONFIDENCE_SCORE"</span>, </span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"CONFmedbin"</span>, <span class="st">"CONFavgbin"</span>, <span class="st">"CONFmedcat"</span>, <span class="st">"CONFmeancat"</span>)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>Kskim <span class="ot">=</span> <span class="fu">skim</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(<span class="fu">c</span>(knowledge_vars, confidence_vars))))</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Attitudes Processed Variables --------------------------------------------</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>attitude_vars <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"_A$|ATTITUDE_"</span>, <span class="fu">names</span>(surv), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>Askim <span class="ot">=</span> <span class="fu">skim</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(attitude_vars)))</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Practices Processed Variables ------------------------------------</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>practice_vars <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"bin$|PRACTICE_"</span>, <span class="fu">names</span>(surv), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>Pskim <span class="ot">=</span> <span class="fu">skim</span>(<span class="fu">select</span>(surv, <span class="fu">all_of</span>(practice_vars)))</span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Export -----------------</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>skim <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">Demographics =</span> Dskim,</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">Knowledge    =</span> Kskim,</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">Attitudes    =</span> Askim,</span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">Practices    =</span> Pskim)</span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(skim, <span class="at">path =</span> <span class="fu">file.path</span>(oup, <span class="st">"SKIMsummaries.xlsx"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="spatial" class="level3">
<h3 class="anchored" data-anchor-id="spatial">Spatial</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transforming Zipcode to County -------------------------------------------</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>zip_info <span class="ot">&lt;-</span> zipcodeR<span class="sc">::</span>zip_code_db <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(zipcode, county, state)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ZIPCODE =</span> <span class="fu">as.character</span>(ZIPCODE)) <span class="sc">%&gt;%</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(zip_info, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ZIPCODE"</span> <span class="ot">=</span> <span class="st">"zipcode"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">LOCATION =</span> county) <span class="sc">%&gt;%</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>state)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="select-all-qs" class="level3">
<h3 class="anchored" data-anchor-id="select-all-qs">Select-All Qs</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to summarize checkbox responses ---------------------------</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>multiFUN <span class="ot">&lt;-</span> <span class="cf">function</span>(df, varname) {</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count how many options each respondent selected</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="sc">!!</span><span class="fu">paste0</span>(varname, <span class="st">"_n"</span>) <span class="sc">:</span><span class="er">=</span> <span class="fu">str_count</span>(<span class="sc">!!</span><span class="fu">sym</span>(varname), <span class="st">","</span>) <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split and count total times each option is selected across all respondents</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  option_counts <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(<span class="sc">!!</span><span class="fu">sym</span>(varname)) <span class="sc">%&gt;%</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(<span class="st">",</span><span class="sc">\\</span><span class="st">s*"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sort</span>(<span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">per_respondent =</span> df[[<span class="fu">paste0</span>(varname, <span class="st">"_n"</span>)]], <span class="at">option_totals =</span> option_counts)</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Respodents Selected per Option ------------------------------</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>freeinfo_summary <span class="ot">&lt;-</span> <span class="fu">multiFUN</span>(surv, <span class="st">"FREEINFOfill"</span>)</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>topics_summary   <span class="ot">&lt;-</span> <span class="fu">multiFUN</span>(surv, <span class="st">"TOPICSfill"</span>)</span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>source_summary   <span class="ot">&lt;-</span> <span class="fu">multiFUN</span>(surv, <span class="st">"SOURCEfill"</span>)</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>counties_summary <span class="ot">&lt;-</span> <span class="fu">multiFUN</span>(surv, <span class="st">"COUNTIES"</span>)</span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>freeinfo_summary<span class="sc">$</span>option_totals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
             One day in-person conference 
                                       87 
               One day virtual conference 
                                       73 
Year-long once a month virtual conference 
                                       41 
                             asynchroNous 
                                        3 
        multiple day in person conference 
                                        1 
                                    Other 
                                        1 
                        quarterly virtual 
                                        1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>topics_summary<span class="sc">$</span>option_totals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
                  CWD                Rabies Vector borne diseases 
                  103                    91                    83 
            Influenza              SarsCoV2         Leptospirosis 
                   76                    67                    63 
           One Health     Raccoon roundworm                 Other 
                   49                    48                    19 
                  All 
                    3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>source_summary<span class="sc">$</span>option_totals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
                   State Wildlife Agency 
                                     100 
                   Academic Publications 
                                      92 
                             Conferences 
                                      59 
                            News Sources 
                                      34 
                            Social Media 
                                      23 
                          Friends/Family 
                                      12 
I have Not looked for health information 
                                      10 
                                   Other 
                                      10 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>counties_summary<span class="sc">$</span>option_totals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>.
        Lee      Mobile  Tuscaloosa     Baldwin     Jackson     Barbour 
         25          21          18          17          17          16 
 Lauderdale      Dallas        Hale  Montgomery        Bibb      Elmore 
         16          15          15          15          13          13 
     Greene     Winston   Jefferson    Lawrence      Walker     Autauga 
         13          13          12          12          12          11 
    Colbert   Covington     Cullman      DeKalb   Limestone       Macon 
         11          11          11          11          11          11 
    Marengo       Perry                 Bullock     Calhoun     Fayette 
         11          11          10          10          10          10 
    Madison       Coosa    Escambia      Morgan     Pickens     Russell 
         10           9           9           9           9           9 
 Tallapoosa  Washington      Blount    Chambers    Cherokee      Coffee 
          9           9           8           8           8           8 
       Dale    Franklin      Geneva      Shelby     Chilton        Clay 
          8           8           8           8           7           7 
      Henry     Lowndes      Marion      Monroe   Talladega    Cleburne 
          7           7           7           7           7           6 
     Etowah     Houston        Pike    Randolph Saint Clair      Sumter 
          6           6           6           6           6           6 
     Clarke     Conecuh       Lamar    Marshall      Butler     Choctaw 
          5           5           5           5           4           4 
     Wilcox    Crenshaw 
          4           3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Options Selected Per Respondent ----------------------</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>surv <span class="ot">&lt;-</span> surv <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">FREEINFOn =</span> freeinfo_summary<span class="sc">$</span>per_respondent,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">TOPICSn   =</span> topics_summary<span class="sc">$</span>per_respondent,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">SOURCEn   =</span> source_summary<span class="sc">$</span>per_respondent,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">COUNTYn    =</span> counties_summary<span class="sc">$</span>per_respondent)</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>freeinfo_avg    <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>FREEINFOn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>freeinfo_med <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>FREEINFOn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>topics_avg      <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>TOPICSn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>topics_med   <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>TOPICSn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>source_avg      <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>SOURCEn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>source_med   <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>SOURCEn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>county_avg      <span class="ot">&lt;-</span> <span class="fu">mean</span>(surv<span class="sc">$</span>COUNTYn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>county_med  <span class="ot">&lt;-</span> <span class="fu">median</span>(surv<span class="sc">$</span>COUNTYn, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(surv<span class="sc">$</span>FREEINFOn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3 
82 37 17 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(surv<span class="sc">$</span>TOPICSn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4  5  6  7  8  9 
21 15 21 22 10  9 11 24  3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(surv<span class="sc">$</span>SOURCEn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4  5  6 
36 30 46 15  8  1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(surv<span class="sc">$</span>COUNTYn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3  4  5  6  7  8 10 11 12 13 14 15 16 17 18 19 22 67 
38 28 14  9 12  9  4  3  1  1  4  3  1  2  2  1  1  1  1  1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average FREEINFO selections per respondent:"</span>, <span class="fu">round</span>(freeinfo_avg, <span class="dv">2</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average FREEINFO selections per respondent: 1.52 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median FREEINFO selections per respondent:"</span>, freeinfo_med, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median FREEINFO selections per respondent: 1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average TOPICS selections per respondent:"</span>, <span class="fu">round</span>(topics_avg, <span class="dv">2</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average TOPICS selections per respondent: 4.43 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median TOPICS selections per respondent:"</span>, topics_med, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median TOPICS selections per respondent: 4 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average SOURCE selections per respondent:"</span>, <span class="fu">round</span>(source_avg, <span class="dv">2</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average SOURCE selections per respondent: 2.5 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median SOURCE selections per respondent:"</span>, source_med, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median SOURCE selections per respondent: 3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average COUNTIES per respondent:"</span>, <span class="fu">round</span>(county_avg, <span class="dv">2</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average COUNTIES per respondent: 4.89 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Median COUNTIES per respondent:"</span>, county_med, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Median COUNTIES per respondent: 3 </code></pre>
</div>
</div>
</section>
</section>
<section id="exporting-df" class="level1">
<h1>Exporting DF</h1>
<p>RStudio.Version() version$version.string citation() knitr::write_bib(sub(“^package:”, ““, grep(”package”, search(), value=TRUE)), file=’’)</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>